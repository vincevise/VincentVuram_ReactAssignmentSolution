{"ast":null,"code":"var _jsxFileName = \"G:\\\\Great-Learning\\\\00_FrontEnd\\\\New folder\\\\graded-coding-assignment-react-main\\\\movies-on-the-tip\\\\src\\\\components\\\\moviesList\\\\MovieListItem.tsx\";\nimport { Button, Card } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { addMovie, deleteMovieById, getHigestMovieId, getMovieByTitle } from \"../../services/movieService\";\nimport './MovieListItem.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MovieListItem = _ref => {\n  let {\n    movie,\n    path,\n    onRemove\n  } = _ref;\n  const toastTimeout = 1000;\n  const isFavouritePage = path === \"favourite\";\n  const {\n    id,\n    title,\n    storyline,\n    ratings,\n    posterurl,\n    year,\n    imdbRating\n  } = movie;\n\n  const average = arr => arr.reduce((a, b) => a + b, 0) / arr.length;\n\n  var rating = parseInt(average(ratings).toFixed(2), 10) / 2;\n  var redirectPath = `${path}/${title}`;\n\n  const addMovieToFavourite = async event => {\n    event.preventDefault();\n\n    try {\n      const movieByTitle = await getMovieByTitle(\"favourite\", movie.title);\n\n      if (movieByTitle !== null) {\n        toast.error(\"Already added in favourite!\", {\n          autoClose: toastTimeout\n        });\n        return;\n      }\n\n      const highestId = await getHigestMovieId(\"favourite\");\n      movie.id = highestId + 1;\n      await addMovie(\"favourite\", movie);\n      toast.success(\"Successfully added in favourite!\", {\n        autoClose: toastTimeout\n      });\n    } catch (errormsg) {\n      toast.error(\"Failed to add the movie!\", {\n        autoClose: toastTimeout\n      });\n    }\n  };\n\n  const removeMovieFromFavourite = async event => {\n    event.preventDefault();\n\n    try {\n      if (movie.id === null) {\n        toast.warn(\"Deletion of a movie without id not implemented\");\n      }\n\n      const data = await deleteMovieById(\"favourite\", movie.id);\n      toast.success(\"Successfully removed from favourite!\", {\n        autoClose: toastTimeout\n      });\n      onRemove(movie.title);\n    } catch (errormsg) {\n      toast.error(\"Failed to remove from favourite\", {\n        autoClose: toastTimeout\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    style: {\n      width: '18rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: redirectPath,\n      children: /*#__PURE__*/_jsxDEV(Card.Img, {\n        variant: \"top\",\n        height: 350,\n        src: `${posterurl}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n      children: /*#__PURE__*/_jsxDEV(Card.Title, {\n        className: \"d-flex justify-content-between d-flex-custom \",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: `Year: ${year}, IMDB: ${imdbRating}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            hidden: isFavouritePage,\n            onClick: addMovieToFavourite,\n            variant: \"primary\",\n            children: \"Add to favourite  \\u2764\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            hidden: !isFavouritePage,\n            onClick: removeMovieFromFavourite,\n            variant: \"danger\",\n            children: \"Remove from favourite\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n};\n\n_c = MovieListItem;\nexport default MovieListItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieListItem\");","map":{"version":3,"names":["Button","Card","Link","toast","addMovie","deleteMovieById","getHigestMovieId","getMovieByTitle","MovieListItem","movie","path","onRemove","toastTimeout","isFavouritePage","id","title","storyline","ratings","posterurl","year","imdbRating","average","arr","reduce","a","b","length","rating","parseInt","toFixed","redirectPath","addMovieToFavourite","event","preventDefault","movieByTitle","error","autoClose","highestId","success","errormsg","removeMovieFromFavourite","warn","data","width"],"sources":["G:/Great-Learning/00_FrontEnd/New folder/graded-coding-assignment-react-main/movies-on-the-tip/src/components/moviesList/MovieListItem.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { Button, Card } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport MovieModel from \"../../model/MovieModel\";\r\nimport { addMovie,  deleteMovieById, getHigestMovieId, getMovieByTitle } from \"../../services/movieService\";\r\nimport Rating from \"../common/Rating\";\r\nimport './MovieListItem.css';\r\n\r\n\r\ntype Props = {\r\n    movie: MovieModel\r\n    path: string\r\n    onRemove:(title:string) => void\r\n};\r\n\r\nconst MovieListItem = ( { movie, path, onRemove } : Props ) => {\r\n    const toastTimeout = 1000;\r\n    const isFavouritePage = path === \"favourite\";\r\n\r\n    const { id, title, storyline, ratings, posterurl, year, imdbRating } = movie;\r\n\r\n    const average = (arr : number[]) => arr.reduce((a,b) => a + b, 0) / arr.length;\r\n    var rating = parseInt(average(ratings).toFixed(2), 10) / 2;\r\n\r\n    var redirectPath = `${path}/${title}`\r\n\r\n    const addMovieToFavourite = async (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        event.preventDefault();\r\n        try {\r\n            const movieByTitle = await getMovieByTitle(\"favourite\", movie.title);\r\n            if (movieByTitle !== null){\r\n                toast.error(\"Already added in favourite!\", { autoClose: toastTimeout })\r\n                return;\r\n            }\r\n\r\n            const highestId = await getHigestMovieId(\"favourite\");\r\n            movie.id = highestId + 1;\r\n            await addMovie(\"favourite\", movie);\r\n            toast.success(\"Successfully added in favourite!\", { autoClose: toastTimeout })\r\n        }\r\n        catch (errormsg : any) {\r\n            toast.error(\"Failed to add the movie!\", { autoClose: toastTimeout })\r\n        }\r\n    };\r\n\r\n    const removeMovieFromFavourite = async (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        event.preventDefault();\r\n        try {\r\n            if (movie.id === null){\r\n                toast.warn(\"Deletion of a movie without id not implemented\");\r\n            }\r\n            const data = await deleteMovieById(\"favourite\", movie.id);\r\n            toast.success(\"Successfully removed from favourite!\", { autoClose: toastTimeout })\r\n            onRemove(movie.title);\r\n        }\r\n        catch (errormsg : any) {\r\n            toast.error(\"Failed to remove from favourite\", { autoClose: toastTimeout })\r\n        }\r\n    };\r\n\r\n   \r\n\r\n    return (\r\n        <Card style={{ width: '18rem' }} >\r\n            <Link to={redirectPath}>\r\n            <Card.Img variant=\"top\" height={350} src={`${posterurl}`}  />\r\n            </Link>\r\n            <Card.Body>\r\n                <Card.Title className=\"d-flex justify-content-between d-flex-custom \">\r\n                    <div className=\"text-xs\">\r\n                        {title}\r\n                    </div>\r\n                    <Card.Text>\r\n                    <span >\r\n                        {`Year: ${year}, IMDB: ${imdbRating}`}\r\n                    </span>\r\n                </Card.Text>\r\n                    {/* <div>\r\n                        <Link to={redirectPath}  className=\"btn btn-primary btn-sm\">\r\n                            More\r\n                        </Link>\r\n                    </div> */}\r\n                    <div>\r\n                    <Button hidden={isFavouritePage} onClick={addMovieToFavourite} variant=\"primary\">Add to favourite \t&#10084;</Button>\r\n                <Button hidden={!isFavouritePage} onClick={removeMovieFromFavourite} variant=\"danger\">Remove from favourite</Button>\r\n           \r\n                    </div>\r\n                </Card.Title>\r\n                \r\n                 </Card.Body>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default MovieListItem"],"mappings":"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"},"metadata":{},"sourceType":"module"}